//SPDX-License-Identifier: MIT
pragma solidity >=0.8.0 <0.9.0;

// ===============================================
// BlockProperty Contract - ë¸”ë¡ ì†ì„±(Block Properties) ì‚¬ìš© ì˜ˆì œ
// ===============================================
// 
// ğŸ“Œ ë¸”ë¡ ì†ì„±(Block Properties) ê°œë…:
//   - í˜„ì¬ ë¸”ë¡ì˜ ë‹¤ì–‘í•œ ì •ë³´ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì „ì—­ ë³€ìˆ˜ë“¤
//   - ë¸”ë¡ì²´ì¸ì˜ ìƒíƒœì™€ ë©”íƒ€ë°ì´í„°ë¥¼ ì œê³µ
//   - ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ì—ì„œ ë¸”ë¡ì²´ì¸ ì •ë³´ ê¸°ë°˜ ë¡œì§ êµ¬í˜„ ì‹œ ì‚¬ìš©
//   - ëª¨ë“  íŠ¸ëœì­ì…˜ì—ì„œ ë™ì¼í•œ ë¸”ë¡ ì •ë³´ë¥¼ ê³µìœ 
//
// ğŸ”— ì£¼ìš” ë¸”ë¡ ì†ì„±ë“¤:
//   - block.basefee: í˜„ì¬ ë¸”ë¡ì˜ ê¸°ë³¸ ìˆ˜ìˆ˜ë£Œ (EIP-1559)
//   - block.chainid: ì²´ì¸ ID (ë©”ì¸ë„·=1, í…ŒìŠ¤íŠ¸ë„· ë“± ê°ê° ê³ ìœ  ID)
//   - block.coinbase: ë¸”ë¡ì„ ì±„êµ´í•œ ë§ˆì´ë„ˆì˜ ì£¼ì†Œ
//   - block.prevrandao: ì´ì „ ë¸”ë¡ì˜ ëœë¤ ê°’ (êµ¬ block.difficulty)
//   - block.gaslimit: í˜„ì¬ ë¸”ë¡ì˜ ê°€ìŠ¤ í•œë„
//   - block.number: í˜„ì¬ ë¸”ë¡ ë²ˆí˜¸ (ì œë„¤ì‹œìŠ¤ ë¸”ë¡ë¶€í„°ì˜ ìˆœì„œ)
//   - block.timestamp: ë¸”ë¡ ìƒì„± ì‹œê°„ (Unix íƒ€ì„ìŠ¤íƒ¬í”„)
//
// ğŸ’¡ í™œìš© ì‚¬ë¡€:
//   - ì‹œê°„ ê¸°ë°˜ ë¡œì§ (ê²½ë§¤ ì¢…ë£Œ, ë½ì—… ê¸°ê°„ ë“±)
//   - ì²´ì¸ë³„ ë‹¤ë¥¸ ë™ì‘ êµ¬í˜„
//   - ë¸”ë¡ ë²ˆí˜¸ ê¸°ë°˜ ë‹¨ê³„ë³„ ê¸°ëŠ¥
//   - ëœë¤ì„±ì´ í•„ìš”í•œ ê²Œì„ ë¡œì§ (ì£¼ì˜: ì§„ì •í•œ ëœë¤ì€ ì•„ë‹˜)
// ===============================================

contract BlockProperty {
    // ğŸ·ï¸ ê° ë¸”ë¡ ì†ì„±ì„ ì €ì¥í•˜ëŠ” public ë³€ìˆ˜ë“¤
    // ì»¨íŠ¸ë™íŠ¸ ë°°í¬ ì‹œì ì˜ ë¸”ë¡ ì •ë³´ê°€ ì €ì¥ë¨
    
    /**
     * @dev ê¸°ë³¸ ìˆ˜ìˆ˜ë£Œ (Base Fee) - EIP-1559ì—ì„œ ë„ì…
     * - ë„¤íŠ¸ì›Œí¬ í˜¼ì¡ë„ì— ë”°ë¼ ë™ì ìœ¼ë¡œ ì¡°ì •ë˜ëŠ” ìµœì†Œ ìˆ˜ìˆ˜ë£Œ
     * - ê°€ìŠ¤ ê°€ê²© ì˜ˆì¸¡ ë° ìˆ˜ìˆ˜ë£Œ ê³„ì‚°ì— í™œìš©
     * - ë‹¨ìœ„: wei (1 ETH = 10^18 wei)
     */
    uint public block1 = block.basefee;
    
    /**
     * @dev ì²´ì¸ ID (Chain ID)
     * - ê° ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí¬ì˜ ê³ ìœ  ì‹ë³„ì
     * - ì´ë”ë¦¬ì›€ ë©”ì¸ë„·: 1, ì„¸í´ë¦¬ì•„ í…ŒìŠ¤íŠ¸ë„·: 11155111
     * - êµì°¨ ì²´ì¸ íŠ¸ëœì­ì…˜ ë°©ì§€ ë° ë„¤íŠ¸ì›Œí¬ êµ¬ë¶„ì— ì‚¬ìš©
     */
    uint public block2 = block.chainid;
    
    /**
     * @dev ì½”ì¸ë² ì´ìŠ¤ (ë§ˆì´ë„ˆ ì£¼ì†Œ)
     * - í˜„ì¬ ë¸”ë¡ì„ ì±„êµ´í•œ ë§ˆì´ë„ˆ(ë˜ëŠ” ê²€ì¦ì)ì˜ ì£¼ì†Œ
     * - PoWì—ì„œëŠ” ë§ˆì´ë„ˆ, PoSì—ì„œëŠ” ê²€ì¦ì ì£¼ì†Œ
     * - ë§ˆì´ë„ˆ ë³´ìƒì´ ì „ì†¡ë˜ëŠ” ì£¼ì†Œ
     */
    address public block3 = block.coinbase;
    
    /**
     * @dev ì´ì „ ëœë¤ ê°’ (Previous Randao)
     * - ì´ì „ ë¸”ë¡ì—ì„œ ìƒì„±ëœ ì˜ì‚¬ ëœë¤ ê°’
     * - êµ¬ block.difficultyë¥¼ ëŒ€ì²´ (The Merge ì´í›„)
     * - ì˜ˆì¸¡ ê°€ëŠ¥í•˜ë¯€ë¡œ ì§„ì •í•œ ëœë¤ì„±ì´ í•„ìš”í•œ ê²½ìš° ì™¸ë¶€ ì˜¤ë¼í´ ì‚¬ìš© ê¶Œì¥
     */
    uint public block4 = block.prevrandao;
    
    /**
     * @dev ê°€ìŠ¤ í•œë„ (Gas Limit)
     * - í˜„ì¬ ë¸”ë¡ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìµœëŒ€ ê°€ìŠ¤ëŸ‰
     * - ë„¤íŠ¸ì›Œí¬ì˜ ì²˜ë¦¬ ìš©ëŸ‰ì„ ë‚˜íƒ€ëƒ„
     * - ë³µì¡í•œ ê³„ì‚°ì˜ ì‹¤í–‰ ê°€ëŠ¥ì„± íŒë‹¨ì— í™œìš©
     */
    uint public block5 = block.gaslimit;
    
    /**
     * @dev ë¸”ë¡ ë²ˆí˜¸ (Block Number)
     * - ì œë„¤ì‹œìŠ¤ ë¸”ë¡(0ë²ˆ)ë¶€í„° í˜„ì¬ê¹Œì§€ì˜ ë¸”ë¡ ìˆœì„œ
     * - ì‹œê°„ ê²½ê³¼ ì¸¡ì • ë° ë‹¨ê³„ë³„ ë¡œì§ êµ¬í˜„ì— í™œìš©
     * - ëŒ€ëµ 12ì´ˆë§ˆë‹¤ 1ì”© ì¦ê°€ (ì´ë”ë¦¬ì›€ ê¸°ì¤€)
     */
    uint public block6 = block.number;
    
    /**
     * @dev ë¸”ë¡ íƒ€ì„ìŠ¤íƒ¬í”„ (Block Timestamp)
     * - ë¸”ë¡ì´ ìƒì„±ëœ Unix íƒ€ì„ìŠ¤íƒ¬í”„ (ì´ˆ ë‹¨ìœ„)
     * - ì‹œê°„ ê¸°ë°˜ ë¡œì§ì—ì„œ ê°€ì¥ ë§ì´ ì‚¬ìš©ë¨
     * - ë§ˆì´ë„ˆê°€ ì¡°ì‘ ê°€ëŠ¥í•˜ë¯€ë¡œ ì •í™•í•œ ì‹œê°„ì´ ì¤‘ìš”í•œ ê²½ìš° ì£¼ì˜ í•„ìš”
     */
    uint public block7 = block.timestamp;
    
    /**
     * @dev í˜„ì¬ ë¸”ë¡ ì •ë³´ ì¡°íšŒ í•¨ìˆ˜
     * @return basefee í˜„ì¬ ê¸°ë³¸ ìˆ˜ìˆ˜ë£Œ
     * @return chainid ì²´ì¸ ID  
     * @return coinbase ë§ˆì´ë„ˆ ì£¼ì†Œ
     * @return prevrandao ì´ì „ ëœë¤ ê°’
     * @return gaslimit ê°€ìŠ¤ í•œë„
     * @return blocknumber ë¸”ë¡ ë²ˆí˜¸
     * @return timestamp íƒ€ì„ìŠ¤íƒ¬í”„
     * 
     * ì»¨íŠ¸ë™íŠ¸ ë°°í¬ ì‹œì ê³¼ í•¨ìˆ˜ í˜¸ì¶œ ì‹œì ì˜ ë¸”ë¡ ì •ë³´ ì°¨ì´ë¥¼ 
     * ë¹„êµí•´ë³¼ ìˆ˜ ìˆëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.
     */
    function getCurrentBlockInfo() public view returns (
        uint basefee,
        uint chainid, 
        address coinbase,
        uint prevrandao,
        uint gaslimit,
        uint blocknumber,
        uint timestamp
    ) {
        return (
            block.basefee,      // í˜„ì¬ ê¸°ë³¸ ìˆ˜ìˆ˜ë£Œ
            block.chainid,      // ì²´ì¸ ID
            block.coinbase,     // í˜„ì¬ ë§ˆì´ë„ˆ ì£¼ì†Œ
            block.prevrandao,   // í˜„ì¬ ëœë¤ ê°’
            block.gaslimit,     // í˜„ì¬ ê°€ìŠ¤ í•œë„
            block.number,       // í˜„ì¬ ë¸”ë¡ ë²ˆí˜¸
            block.timestamp     // í˜„ì¬ íƒ€ì„ìŠ¤íƒ¬í”„
        );
    }
    
    /**
     * @dev ì‹œê°„ ê¸°ë°˜ ì¡°ê±´ ê²€ì‚¬ ì˜ˆì œ
     * @param targetTime ëª©í‘œ ì‹œê°„ (Unix íƒ€ì„ìŠ¤íƒ¬í”„)
     * @return bool í˜„ì¬ ì‹œê°„ì´ ëª©í‘œ ì‹œê°„ ì´í›„ì¸ì§€ ì—¬ë¶€
     */
    function isAfterTime(uint targetTime) public view returns (bool) {
        return block.timestamp >= targetTime;
    }
    
    /**
     * @dev ë¸”ë¡ ë²ˆí˜¸ ê¸°ë°˜ ë‹¨ê³„ ê³„ì‚° ì˜ˆì œ
     * @return uint í˜„ì¬ ë‹¨ê³„ (10000ë¸”ë¡ë§ˆë‹¤ ë‹¨ê³„ ì¦ê°€)
     */
    function getCurrentPhase() public view returns (uint) {
        return block.number / 10000;
    }
    
    /**
     * @dev ì²´ì¸ ê²€ì¦ í•¨ìˆ˜ ì˜ˆì œ
     * @param expectedChainId ì˜ˆìƒ ì²´ì¸ ID
     * @return bool í˜„ì¬ ì²´ì¸ì´ ì˜ˆìƒ ì²´ì¸ê³¼ ê°™ì€ì§€ ì—¬ë¶€
     */
    function isCorrectChain(uint expectedChainId) public view returns (bool) {
        return block.chainid == expectedChainId;
    }
}